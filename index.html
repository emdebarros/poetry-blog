<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Poetry Space</title>
  <meta name="description" content="A quiet personal space where poetry is therapy. While ‘My Infinite Adore’ holds these walls, I hope to speak to her here—to meet again." />
  <style>
    :root {
      --bg: #ffffff;
      --fg: #0f172a;
      --muted: #475569;
      --card: #f8fafc;
      --border: #e2e8f0;
      --accent: #2563eb;
    }
    @media (prefers-color-scheme: dark) {
      :root { --bg:#0b0f1a; --fg:#e5e7eb; --muted:#94a3b8; --card:#0f172a; --border:#1f2937; --accent:#60a5fa; }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:var(--bg);color:var(--fg);line-height:1.6}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(180%) blur(8px);background:color-mix(in oklab,var(--bg) 85%, transparent);border-bottom:1px solid var(--border)}
    .wrap{max-width:1100px;margin:0 auto;padding:1rem}
    .brand{display:flex;align-items:baseline;gap:.75rem;flex-wrap:wrap}
    .brand h1{font-size:1.25rem;letter-spacing:.02em;margin:0}
    .brand small{color:var(--muted)}
    nav.tabs{display:flex;gap:.5rem;margin-left:auto}
    nav.tabs a{display:inline-block;padding:.45rem .75rem;border:1px solid var(--border);background:var(--bg);color:var(--fg);border-radius:.5rem;font-size:.9rem;white-space:nowrap}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:1.25rem;align-items:start;padding:1.25rem;max-width:1100px;margin:0 auto}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .panel{border:1px solid var(--border);background:var(--card);border-radius:1rem;padding:.75rem}
    .search{display:flex;gap:.5rem;align-items:center;padding:.5rem .75rem;border:1px solid var(--border);border-radius:.75rem;background:var(--bg)}
    .search input{border:0;outline:0;background:transparent;color:var(--fg);width:100%}
    .list{margin-top:.75rem}
    .item{display:grid;grid-template-columns:1fr auto;gap:.5rem;align-items:baseline;padding:.75rem;border-radius:.75rem;cursor:pointer}
    .item:hover{background:color-mix(in oklab,var(--bg) 90%, var(--card))}
    .item-title{font-weight:600}
    .item-meta{color:var(--muted);font-size:.85rem}
    article{border:1px solid var(--border);background:var(--card);border-radius:1rem;padding:1.25rem}
    .poem-title{font-size:clamp(1.3rem,2.6vw,2rem);margin:0 0 .25rem 0;letter-spacing:.01em}
    .meta{color:var(--muted);font-size:.9rem;margin-bottom:1rem;display:flex;gap:.5rem;flex-wrap:wrap}
    .poem{font-family:ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;white-space:pre-wrap;letter-spacing:.01em;font-size:1.06rem}
    footer{text-align:center;color:var(--muted);padding:3rem 1rem}

    /* — Mobile refinements — */
    @media (max-width:700px){
      .wrap{padding:.75rem}
      nav.tabs{width:100%;order:3;overflow-x:auto;padding-bottom:.25rem;margin-left:0}
      nav.tabs a{flex:0 0 auto}
      .grid{padding:.75rem}
      .panel, article{padding:1rem}
      .poem{font-size:1rem;line-height:1.7}
      .brand h1{font-size:1.05rem}
      .brand small{font-size:.9rem}
      .search{gap:.4rem}
      .item{padding:.65rem}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap brand" role="banner">
      <h1>My Infinite Adore</h1>
      <small>my poetry space</small>
      <span style="margin-left:auto"></span>
      <nav class="tabs" aria-label="Sections">
        <a href="#/intro" title="Introduction">Intro</a>
        <a href="#/analyses" title="Poem analyses">Analyses</a>
        <a href="#/originals" title="My originals">Originals</a>
      </nav>
    </div>
  </header>

  <main class="grid" id="app">
    <aside class="panel" aria-label="Poem list and search">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35m1.6-4.65a6.95 6.95 0 11-13.9 0 6.95 6.95 0 0113.9 0z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        <input id="q" type="search" placeholder="Search… (title or text)" autocomplete="off" />
      </div>
      <div class="list" id="list" role="list"></div>
    </aside>

    <section>
      <article aria-live="polite" aria-busy="false">
        <h2 class="poem-title" id="title">Welcome</h2>
        <div class="meta" id="meta"></div>
        <div class="poem" id="poem"></div>
      </article>
    </section>
  </main>

  <footer>
    <span>© <span id="year"></span> · Em De Barros — All poems are my original work. No reproduction without permission.</span>
  </footer>

  <script>
    // ——— CONTENT ————————————————————————————————————————————————
    const originals = [
      {
        title: "My Infinite Adore",
        slug: "my-infinite-adore",
        date: "2025-11-03",
        text: `My Infinite Adore\nI lay each stone in silence\na dwelling untouched\nFor when your heart remembers\nour unwritten pages\nThe walls will wake\nto whisper the version of us\ntime was too young to hold`
      },
      {
        title: "Rubberband",
        slug: "rubberband",
        date: "2025-11-05",
        text: `I got this rubberband on my wrist\nand i snap it every time that i think about your lips\nI got this rubberband on my wrist\nalmost break it every time that i’m trying to forget\nI got this rubberband on my wrist\nand i snap it every time to remember you exist\nI got this rubberband on my wrist\nand I break it every time I remember the promise I still haven’t kept yet`
      }
    ];

    const analyses = [];

    const intro = {
      title: "Why I'm Here",
      text: `This is my space to express myself as I’ve fallen in love with poetry.\n\nIt’s a form of therapy. It gives me breath while taking my breath away.\nIt’s where my love lives. It’s where I can be understood. It’s where I grow.\n\nMy Infinite Adore, when your heart is ready, you’ll know where to find me.`
    };

    // ——— STATE & HELPERS ————————————————————————————————————————
    const $ = (sel) => document.querySelector(sel);
    const listEl = $('#list');
    const qEl = $('#q');
    const state = { q: '', mode: 'intro' }; // 'intro' | 'analyses' | 'originals'

    function dataForMode(){ return state.mode==='analyses' ? analyses : originals; }

    function matches(p){
      const q = state.q.trim().toLowerCase();
      const hay = [p.title, p.text].join(' ').toLowerCase();
      return !q || hay.includes(q);
    }

    // ——— UPDATED renderList ——————————————————————————————————————————
    function renderList(){
      let items;

      if (state.mode === 'intro') {
        // Combine all posts for Intro search
        items = [
          ...analyses.map(p => ({ ...p, __mode: 'analyses' })),
          ...originals.map(p => ({ ...p, __mode: 'originals' }))
        ]
        .filter(matches)
        .sort((a, b) => {
          const da = a.date || '';
          const db = b.date || '';
          return db.localeCompare(da); // newest first
        });
      } else {
        // Normal per-section list
        items = dataForMode()
          .slice()
          .filter(matches)
          .sort((a, b) => {
            const da = a.date || '';
            const db = b.date || '';
            return db.localeCompare(da);
          });
      }

      listEl.innerHTML = '';
      if (items.length === 0){
        listEl.innerHTML = `<div class="item"><div class="item-title">No posts</div><div class="item-meta"></div></div>`;
        return;
      }

      for (const p of items){
        const el = document.createElement('div');
        el.className = 'item';
        el.role = 'listitem';
        el.innerHTML = `
          <div>
            <div class="item-title">${p.title}</div>
            <div class="item-meta">${p.date ?? ''}</div>
          </div>
          <div>→</div>
        `;

        const base = p.__mode
          ? `#/${p.__mode}/`
          : (state.mode === 'analyses' ? '#/analyses/' : '#/originals/');

        el.onclick = () => navigate(`${base}${p.slug}`);
        listEl.appendChild(el);
      }
    }

    function renderEntry(p){
      $('#title').textContent = p.title;
      $('#meta').innerHTML = `<span>${p.date ?? ''}</span>`;
      $('#poem').textContent = p.text;
      document.title = `${p.title} — My Poetry Space`;
    }

    function renderIntro(){
      $('#title').textContent = intro.title;
      $('#meta').innerHTML = '';
      $('#poem').textContent = intro.text;
      document.title = `My Poetry Space — Intro`;
    }

    function notFound(){
      $('#title').textContent = 'Not found';
      $('#meta').innerHTML = '';
      $('#poem').textContent = 'This page does not exist yet.';
      document.title = `My Poetry Space`;
    }

    function navigate(hash){ if (location.hash !== hash) location.hash = hash; route(); }

    function route(){
      const h = location.hash || '#/intro';
      if (h === '#/intro'){ state.mode='intro'; renderList(); renderIntro(); return; }
      if (h === '#/analyses'){ state.mode='analyses'; renderList(); const newest = analyses[0]; if (newest) renderEntry(newest); else { $('#title').textContent='Analyses'; $('#meta').innerHTML=''; $('#poem').textContent='No analyses yet.'; } return; }
      if (h === '#/originals'){ state.mode='originals'; renderList(); const newest = originals[0]; if (newest) renderEntry(newest); return; }
      let m = /^#\/analyses\/(.+)$/.exec(h); if (m){ state.mode='analyses'; renderList(); const p = analyses.find(x=>x.slug===m[1]); if (p) return renderEntry(p); return notFound(); }
      m = /^#\/originals\/(.+)$/.exec(h); if (m){ state.mode='originals'; renderList(); const p = originals.find(x=>x.slug===m[1]); if (p) return renderEntry(p); return notFound(); }
      notFound();
    }

    qEl.addEventListener('input', (e)=>{ state.q = e.target.value; renderList(); });

    renderList();
    route();
    window.addEventListener('hashchange', route);
    $('#year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
